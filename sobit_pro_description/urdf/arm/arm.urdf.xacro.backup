<?xml version="1.0" encoding="UTF-8" ?>
<robot name="arm"
  xmlns:xacro="http://ros.org/wiki/xacro">

  <xacro:include filename="$(find sobit_pro_description)/urdf/arm/arm.transmission.xacro" />

  <xacro:macro name="arm" params="prefix parent">
    <joint name="${prefix}_base_joint" type="fixed">
      <parent link="${parent}" />
      <child link="${prefix}_base_link" />
      <origin xyz="0 -0.221 0.5995" rpy="0 0 0" />
    </joint>

    <link name="${prefix}_base_link">
      <visual>
        <origin xyz="0 0 0" rpy="1.570796327 0 0" />
        <geometry>
          <mesh filename="package://sobit_pro_description/meshes/arm/sobit_pro_arm_base.dae"/>
        </geometry>
      </visual>
    </link>

    <joint name="${prefix}_fixed_joint" type="fixed">
      <parent link="${prefix}_base_link" />
      <child link="${prefix}_fixed_link" />
      <origin xyz="0 0 0" rpy="0 0 ${-M_PI / 2}" />
    </joint>

    <link name="${prefix}_fixed_link" />

    <joint name="${prefix}1_1_joint" type="revolute">
      <parent link="${prefix}_base_link" />
      <child link="${prefix}1_1_link" />
      <origin xyz="0 0 0" rpy="${M_PI / 2} 0 0" />
      <axis xyz="-1 0 0" />
      <limit lower="${-M_PI / 2}" upper="${M_PI / 2}" effort="10" velocity="10"/>
      <dynamics damping="0.2" friction="0"/>
    </joint>

    <link name="${prefix}1_1_link">
      <visual>
        <origin xyz="0 0 0" rpy="1.570796327 0 0" />
        <geometry>
          <mesh filename="package://sobit_pro_description/meshes/arm/sobit_pro_arm1.dae"/>
        </geometry>
      </visual>
    </link>

    <joint name="${prefix}1_2_joint" type="revolute">
      <parent link="${prefix}_base_link" />
      <child link="${prefix}1_2_link" />
      <origin xyz="0 0 0" rpy="${M_PI / 2} 0 0" />
      <axis xyz="-1 0 0" />
      <limit lower="${-M_PI / 2}" upper="${M_PI / 2}" effort="10" velocity="10"/>
      <dynamics damping="0.2" friction="0"/>
    </joint>

    <link name="${prefix}1_2_link">
      <origin xyz="0 0 0" rpy="1.570796327 0 0" />
    </link>

    <joint name="${prefix}2_1_joint" type="revolute">
      <parent link="${prefix}1_1_link" />
      <child link="${prefix}2_1_link" />
      <origin xyz="0 0 0.15" rpy="-1.137 0 0" />
      <axis xyz="-1 0 0" />
      <limit lower="${-M_PI / 2}" upper="${M_PI / 2}" effort="10" velocity="10"/>
      <dynamics damping="0.2" friction="0"/>
    </joint>

    <link name="${prefix}2_1_link">
      <visual>
        <origin xyz="0 0 -0.15" rpy="1.570796327 0 0" />
        <geometry>
          <mesh filename="package://sobit_pro_description/meshes/arm/sobit_pro_arm2.dae"/>
        </geometry>
      </visual>
    </link>

    <joint name="${prefix}2_2_joint" type="revolute">
      <parent link="${prefix}1_1_link" />
      <child link="${prefix}2_2_link" />
      <origin xyz="0 0 0.15" rpy="-1.137 0 0" />
      <axis xyz="-1 0 0" />
      <limit lower="${-M_PI / 2}" upper="${M_PI / 2}" effort="10" velocity="10"/>
      <dynamics damping="0.2" friction="0"/>
    </joint>

    <link name="${prefix}2_2_link">
      <origin xyz="0 0 -0.15" rpy="1.570796327 0 0" />
    </link>

    <joint name="${prefix}3_joint" type="revolute">
      <parent link="${prefix}2_1_link" />
      <child link="${prefix}3_link" />
      <origin xyz="0 -0.13594617 0.06339274" rpy="-1.30 0 0" />
      <axis xyz="-1 0 0" />
      <limit lower="${-M_PI / 2}" upper="${M_PI / 2}" effort="10" velocity="10"/>
      <dynamics damping="0.2" friction="0"/>
    </joint>

    <link name="${prefix}3_link">
      <visual>
        <origin xyz="0 0.13594617 -0.21339274" rpy="1.570796327 0 0" />
        <geometry>
          <mesh filename="package://sobit_pro_description/meshes/arm/sobit_pro_arm3.dae"/>
        </geometry>
      </visual>
    </link>

    <joint name="${prefix}4_joint" type="revolute">
      <parent link="${prefix}3_link" />
      <child link="${prefix}4_link" />
      <origin xyz="0 -0.09641814 -0.11490667" rpy="0.87 0 0" />
      <axis xyz="-1 0 0" />
      <limit lower="${-M_PI / 2}" upper="${M_PI / 2}" effort="10" velocity="10"/>
      <dynamics damping="0.2" friction="0"/>
    </joint>

    <link name="${prefix}4_link">
      <visual>
        <origin xyz="0 0.23236431 -0.09848607" rpy="1.570796327 0 0" />
        <geometry>
          <mesh filename="package://sobit_pro_description/meshes/arm/sobit_pro_arm4.dae"/>
        </geometry>
      </visual>
    </link>

    <xacro:arm_transmission prefix="${prefix}"/>

  </xacro:macro>
</robot>